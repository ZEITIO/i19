<!DOCTYPE html>
<!-- saved from url=(0043)http://www.sitepoint.com/introduction-thor/ -->
<html class=" js no-touch svg inlinesvg svgclippaths no-ie8compat" lang="en"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta property="og:image" content="http://www.sitepoint.com/wp-content/themes/sitepoint/assets/images/icon.ruby.png">
        
    <link rel="shortcut icon" href="http://www.sitepoint.com/favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="http://www.sitepoint.com/wp-content/themes/sitepoint/assets/images/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://www.sitepoint.com/wp-content/themes/sitepoint/assets/images/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://www.sitepoint.com/wp-content/themes/sitepoint/assets/images/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://www.sitepoint.com/wp-content/themes/sitepoint/assets/images/apple-touch-icon-144x144-precomposed.png">

        <link href="https://plus.google.com/+sitepoint" rel="publisher">
        <meta property="twitter:account_id" content="15743570">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">

    <script async="" src="./Introduction to Thor_files/saved_resource"></script><script async="" type="text/javascript" src="./Introduction to Thor_files/gpt.js"></script><script async="" src="./Introduction to Thor_files/analytics.js"></script><script type="text/javascript">
    function r(f){/in/.test(document.readyState)?setTimeout(r,9,f):f()}
    </script>

    
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-30131-1', '.sitepoint.com');

  ga('set', 'dimension1', 'post');
ga('set', 'dimension2', 'Ruby');
ga('set', 'dimension3', 'Ruby');
ga('set', 'dimension4', '2013-11-22');
ga('set', 'dimension5', 'Dhaivat Pandya');

  ga('set', 'contentGroup5', 'ruby');  ga('send', 'pageview');
</script>
    <script type="text/javascript">
      var googletag = googletag || {};
      googletag.cmd = googletag.cmd || [];
      (function() {
      var gads = document.createElement('script');
      gads.async = true;
      gads.type = 'text/javascript';
      var useSSL = 'https:' == document.location.protocol;
      gads.src = (useSSL ? 'https:' : 'http:') + '//www.googletagservices.com/tag/js/gpt.js';
      var node = document.getElementsByTagName('script')[0];
      node.parentNode.insertBefore(gads, node);
      })();
    </script>
    
<!-- This site is optimized with the Yoast WordPress SEO plugin v1.4.24 - http://yoast.com/wordpress/seo/ -->
<title>Introduction to Thor</title>
<link rel="canonical" href="./Introduction to Thor_files/Introduction to Thor.html">
<link rel="publisher" href="https://plus.google.com/+sitepoint/">
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Introduction to Thor">
<meta property="og:description" content="Looking at RubyGem’s list of “Most Downloaded” gems, we notice lots of familiar names: “rake”, “rails”, “rack”, “actionmailer”, etc. But, “thor” is an exception; few of us have heard of it and even fewer have written code with it. So, what exactly is Thor? It is a way to write powerful command line utilities in …">
<meta property="og:url" content="http://www.sitepoint.com/introduction-thor/">
<meta property="og:site_name" content="SitePoint">
<meta property="article:publisher" content="https://www.facebook.com/sitepoint">
<meta property="article:section" content="Gems">
<meta property="article:section" content="Ruby">
<meta property="article:section" content="Ruby Tutorials">
<meta property="article:published_time" content="2013-11-22T06:30:28+00:00">
<meta property="article:modified_time" content="2013-11-18T09:14:08+00:00">
<meta property="og:image" content="http://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2013/11/256px-Ruby_logo.svg_-300x300.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@sitepointdotcom">
<meta name="twitter:domain" content="SitePoint">
<meta name="twitter:creator" content="@dhaivatpoincare">
<!-- / Yoast WordPress SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="SitePoint » Introduction to Thor Comments Feed" href="http://www.sitepoint.com/introduction-thor/feed/">
<link rel="stylesheet" id="discourse_comments-css" href="./Introduction to Thor_files/style.css" type="text/css" media="all">
<link rel="stylesheet" id="sitepoint-fonts-css" href="./Introduction to Thor_files/css" type="text/css" media="all">
<link rel="stylesheet" id="sitepoint-styles-css" href="./Introduction to Thor_files/styles-fdad36ee5a11db04c6cdecba8eb8ab1e.css" type="text/css" media="all">
<script type="text/javascript" src="./Introduction to Thor_files/scripts-head-e4a2be27db699092d2993e42901cedf6.js"></script><iframe src="./Introduction to Thor_files/container.html" style="visibility: hidden; display: none;"></iframe><style type="text/css"></style>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.sitepoint.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.sitepoint.com/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 4.0">
<link rel="shortlink" href="http://www.sitepoint.com/?p=73119">

<!--Plugin WP Missed Schedule 2013.1231.2013 Active - Tag 6707293c0218e2d8b7aa38d418ffa608-->

<!-- This site is patched which an important unfixed problem since WordPress 2.5+ to 3.9+ -->

<!-- wp-parsely Plugin Version 1.5 -->
<meta name="wp-parsely_version" id="wp-parsely_version" content="1.5">
<meta name="parsely-page" id="parsely-page" content="{&quot;title&quot;:&quot;Introduction to Thor&quot;,&quot;link&quot;:&quot;http:\/\/www.sitepoint.com\/introduction-thor\/&quot;,&quot;image_url&quot;:&quot;&quot;,&quot;type&quot;:&quot;post&quot;,&quot;post_id&quot;:&quot;73119&quot;,&quot;pub_date&quot;:&quot;2013-11-22T14:30:28Z&quot;,&quot;section&quot;:&quot;Ruby&quot;,&quot;author&quot;:&quot;Dhaivat Pandya&quot;,&quot;tags&quot;:[&quot;ruby\/gems&quot;,&quot;ruby\/ruby tutorials&quot;]}">
<script type="text/javascript">
    googletag.cmd.push(function() {
		googletag.defineSlot("/7448792/SP2013_Articles_300x250_1", [300, 250], "div-gpt-ad-1392428092543-0").addService(googletag.pubads());
		googletag.defineSlot("/7448792/SP2013_Articles_728x90_1", [728, 90], "div-gpt-ad-article-header").addService(googletag.pubads());
		googletag.defineSlot("/7448792/SP2013_Articles_300x250_4", [300, 250], "div-gpt-ad-1392428092543-3").addService(googletag.pubads());
		googletag.defineSlot("/7448792/SP2013_Articles_300x600_1", [300, 600], "div-gpt-ad-1392428092543-4").addService(googletag.pubads());
		googletag.defineSlot("/7448792/SP2013_Articles_320x50_1", [320, 50], "div-gpt-ad-1392428092543-5").addService(googletag.pubads());
		googletag.defineSlot("/7448792/SP2013_Articles_320x50_2", [320, 50], "div-gpt-ad-1392428092543-6").addService(googletag.pubads());
		googletag.defineSlot("/7448792/Sitepoint_125x125_2", [125, 125], "div-gpt-ad-1400782268851-0").addService(googletag.pubads());
		googletag.defineSlot("/7448792/Sitepoint_125x125_3", [125, 125], "div-gpt-ad-1400782991292-0").addService(googletag.pubads());
		googletag.defineSlot("/7448792/Sitepoint_125x125_4", [125, 125], "div-gpt-ad-1400783440189-0").addService(googletag.pubads());
		googletag.defineSlot("/7448792/Sitepoint_125x125_5", [125, 125], "div-gpt-ad-1400783664460-0").addService(googletag.pubads());
		googletag.defineSlot("/7448792/Sitepoint_125x125_6", [125, 125], "div-gpt-ad-1400783847643-0").addService(googletag.pubads());
		googletag.defineSlot("/7448792/Sitepoint_125x125", [125, 125], "div-gpt-ad-1400800012700-0").addService(googletag.pubads());
		googletag.pubads().setTargeting("channel", "Ruby");
		googletag.pubads().setTargeting("post_id", "73119");
		googletag.pubads().setTargeting("OpenX",["true", "false"]);
		googletag.pubads().setTargeting("Tribal",["true", "false"]);
		googletag.pubads().enableSingleRequest();
        googletag.pubads().collapseEmptyDivs();
        googletag.enableServices();
    });
</script><script async="" type="text/javascript" src="http://partner.googleadservices.com/gpt/pubads_impl_54.js"></script>
        <link rel="stylesheet" type="text/css" href="./Introduction to Thor_files/shCore.css"><link rel="stylesheet" type="text/css" href="./Introduction to Thor_files/shThemeDefault.css"><style type="text/css" id="syntaxhighlighteranchor"></style>
    <!--[if lt IE 9]>
      <script src="/wp-content/themes/sitepoint/assets/javascripts/vendor/respond.custom.min.js"></script>
    <![endif]-->
  <script type="text/javascript" async="" src="./Introduction to Thor_files/embed.js"></script><style type="text/css"></style><script async="" src="./Introduction to Thor_files/count-data.js"></script><link rel="stylesheet" type="text/css" href="chrome-extension://pkehgijcmpdhfbdbbnkijodmdjhbjlgp/skin/socialwidgets.css"></head>

  <body>

    <header class="main-header" role="banner">
      <nav class="top-bar" role="navigation">
        <ul class="title-area">
          <li class="name">
            <div class="logo">
              <a class="logomark" href="http://www.sitepoint.com/" tabindex="1">
                <img src="./Introduction to Thor_files/sitepoint.svg" alt="SitePoint">
              </a>
            </div>
          </li>
          <li class="toggle-topbar menu-icon">
            <a href="http://www.sitepoint.com/introduction-thor/#"><span>Menu</span></a>
          </li>
        </ul>

        
      <section class="top-bar-section">
          <ul class="right">
            <li class="has-dropdown">
              <a href="http://www.sitepoint.com/introduction-thor/#" tabindex="-1">Topics</a>
              <ul class="dropdown"><li class="title back js-generated"><h5><a href="http://www.sitepoint.com/introduction-thor/#">« Back</a></h5></li>
                <li>
                  <a class="category-html-css menuitem" href="http://www.sitepoint.com/html-css/">HTML &amp; CSS</a>
                </li>
                <li>
                  <a class="category-javascript menuitem" href="http://www.sitepoint.com/javascript/">JS</a>
                </li>
                <li>
                  <a class="category-php menuitem" href="http://www.sitepoint.com/php/">PHP</a>
                </li>
                <li>
                  <a class="category-ruby menuitem" href="http://www.sitepoint.com/ruby/">Ruby</a>
                </li>
                <li>
                  <a class="category-mobile menuitem" href="http://www.sitepoint.com/mobile/">Mobile</a>
                </li>
                <li>
                  <a class="category-design-ux menuitem" href="http://www.sitepoint.com/design-ux/">Design &amp; UX</a>
                </li>
                <li>
                  <a class="category-business-marketing menuitem" href="http://www.sitepoint.com/business-marketing/">Business</a>
                </li>
                <li>
                  <a class="category-wordpress menuitem" href="http://www.sitepoint.com/wordpress/">WordPress</a>
                </li>
                <li>
                  <a class="category-design menuitem" href="http://www.sitepoint.com/web-foundations/">Web Foundations</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="http://www.sitepoint.com/store" tabindex="2">Books</a>
            </li>
            <li class="">
              <a href="https://learnable.com/topics/all/course?utm_source=sitepoint&utm_medium=link&utm_content=top-nav" target="_blank" tabindex="3">Courses</a>
            </li>
<!--             <li>
              <a href="/store/" tabindex="2">Store</a>
            </li>
 -->            <li>
              <a href="http://community.sitepoint.com/" tabindex="4">Forums</a>
            </li>
            <li>
              <a href="http://www.sitepoint.com/newsletter" tabindex="5">Newsletters</a>
            </li>
            <li class="top-bar_search">
              <form method="get" action="http://www.sitepoint.com/">
                <input autocomplete="off" class="searchquery" id="search-box" name="s" placeholder="Search…" type="text" tabindex="4">
                <button tabindex="-1"></button>
              </form>
            </li>
          </ul>
        </section></nav>
    </header>
<div class="awesome-bar awesome-bar--default" data-campaign="newrelic" style="background:#038D98;">
 <a class="awesome-bar_container" target="_blank" href="http://newrelic.com/sp/datanerd?utm_source=SITE&utm_medium=text_ad&utm_content=LookGood&utm_campaign=DataNerd&mpc=TA-SITE-generic-EN-Signup-DataNerd-LookGood" id="bar-new-relic-link-1">
   <img class="awesome-bar_brand" src="./Introduction to Thor_files/NewRelic-logo-w.png" alt="New Relic" style="height:22px;">
   <span class="awesome-bar_message" style="color:#fff;" id="bar-new-relic-message-1">When your software looks good, you do too. Deploy New Relic and see for yourself.</span>
   <span class="button small radius awesome-bar_action" style="background:#78cbd1;" id="bar-new-relic-button-1">Free t-shirt, please!</span>
 </a>
 <span class="awesome-bar_close">x</span>
</div>
<script>
(function(){
var rand = Math.random();
var link  = document.getElementById("bar-new-relic-link-1");
var message  = document.getElementById("bar-new-relic-message-1");
var button  = document.getElementById("bar-new-relic-button-1");
if (rand < 0.5) {
link.href = "http://newrelic.com/sp/datanerd?utm_source=SITE&utm_medium=text_ad&utm_content=nerdtiffic&utm_campaign=datanerd&mpc=TA-SITE-generic-EN-Signup-datanerd-nerdtiffic"
message.innerHTML = "Make your software run better, and look better (with a free nerdiffic t-shirt!) in the process.";
button.innerHTML = "Yes, please";
} else {
link.href = "http://newrelic.com/sp/datanerd?utm_source=SITE&utm_medium=text_ad&utm_content=LookGood&utm_campaign=DataNerd&mpc=TA-SITE-generic-EN-Signup-DataNerd-LookGood";
message.innerHTML = "When your software looks good, you do too. Deploy New Relic and see for yourself.";
button.innerHTML = "Free t-shirt, please!";
}
})()
</script><div class="awesome-bar awesome-bar--alternative js show" data-campaign="newrelic" style="background:#038D98;">
 <a class="awesome-bar_container" target="_blank" href="http://newrelic.com/sp/datanerd?utm_source=SITE&utm_medium=text_ad&utm_content=swlove&utm_campaign=datanerd&mpc=TA-SITE-generic-EN-Signup-datanerd-swlove" id="bar-new-relic-link-2">
   <img class="awesome-bar_brand" src="./Introduction to Thor_files/NewRelic-logo-w.png" alt="New Relic" style="height:22px;">
   <span class="awesome-bar_message" style="color:#fff;" id="bar-new-relic-message-2">Give your software the love it needs. And we'll give you the new t-shirt you need.</span>
   <span class="button small radius awesome-bar_action" style="background:#78cbd1;" id="bar-new-relic-button-2">Create free account</span>
 </a>
 <span class="awesome-bar_close">x</span>
</div>
<script>
(function(){
var rand = Math.random();
var link  = document.getElementById("bar-new-relic-link-2");
var message  = document.getElementById("bar-new-relic-message-2");
var button  = document.getElementById("bar-new-relic-button-2");
if (rand < 0.5) {
link.href = "http://newrelic.com/sp/datanerd?utm_source=SITE&utm_medium=text_ad&utm_content=Sweat&utm_campaign=DataNerd&mpc=TA-SITE-generic-EN-Signup-DataNerd-Sweat";
message.innerHTML = "Improve your app and get a free t-shirt. We get it, coding is sweaty business.";
button.innerHTML = "Show me how";
} else {
link.href = "http://newrelic.com/sp/datanerd?utm_source=SITE&utm_medium=text_ad&utm_content=swlove&utm_campaign=datanerd&mpc=TA-SITE-generic-EN-Signup-datanerd-swlove"
message.innerHTML = "Give your software the love it needs. And we'll give you the new t-shirt you need.";
button.innerHTML = "Create free account";
}
})()
</script><main role="main" class="page page--primary category-ruby">

  <header role="banner" class="page_banner page_banner--category">
    <h2 class="page_banner_title">
        <a href="http://www.sitepoint.com/ruby/" class="page_banner_title_category">
    <svg class="Logo" width="90px" height="90px" viewBox="0 0 90 90">
  <g fill-rule="evenodd">
    <path class="Logo_fg" d="M56.3449588,40.3640594 L44.9667063,63.1890318 L33.5884538,40.3640594 L56.3449588,40.3640594 Z M44.916572,26.9312076 L33.5385066,39.0647754 L56.2946374,39.0647754 L44.916572,26.9312076 Z M31.9489858,40.268873 L20.345877,40.268873 L43.1910524,62.14278 L31.9489858,40.268873 Z M69.6109191,40.2700703 L58.0074362,40.2700703 L46.892202,62.3565003 L69.6109191,40.2700703 Z M32.1379249,26.8244472 L20.7387208,38.9476383 L32.1360543,38.9476383 L32.1379249,26.8244472 Z M43.0913449,26.6588189 L33.3435812,26.6588189 L33.3420847,37.0273482 L43.0913449,26.6588189 Z M56.5933857,26.6588189 L46.845622,26.6588189 L56.5946952,37.0273482 L56.5933857,26.6588189 Z M57.9486967,26.8244472 L57.9503804,38.9476383 L69.3477138,38.9476383 L57.9486967,26.8244472 Z"></path>
  </g>
</svg>
    Ruby  </a>
        </h2>
    <div class="page_banner_adspot">
      <div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-product-37"><!-- SP2013_Articles_728x90_1 -->
<div id="div-gpt-ad-article-header" style="width:728px; height:90px;" class="adspot">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-article-header"); });</script>
 </div></div>      <div class="widget maestro maestro-content-type-ad hide-for-desktop-SP hide-for-tablet-SP" id="maestro-product-50"><!-- SP2013_Articles_320x50_1 -->
<div id="div-gpt-ad-1392428092543-5" style="width:320px; height:50px;" class="adspot">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1392428092543-5"); });</script>
 </div></div>    </div>

    <div class="page_banner_divider-container">
      <hr>
    </div>
  </header>

      <div class="page_content">
      <article class="article" id="post-73119">
        <header class="article_header">
          <h1 class="article_title">Introduction to Thor</h1>

          
    <div class="contributor article_contributor">

          <figure class="contributor_avatar">
      <a href="http://www.sitepoint.com/author/dpandya/">
        <img src="./Introduction to Thor_files/1404782885217352-96x96.png" width="96" height="96" alt="Dhaivat Pandya" class="avatar avatar-96 wp-user-avatar wp-user-avatar-96 alignnone photo">      </a>
    </figure>
  
      <div class="contributor_details">
          <div class="contributor_name">
    <a href="http://www.sitepoint.com/author/dpandya/">Dhaivat Pandya</a>
  </div>

        </div>

    </div>

    
          <div class="article_meta-data">
            <p class="article_pub-date">Published <time datetime="2013-11-22" pubdate="">November 22, 2013</time></p>
          </div>
          <div class="article_header__buttons">
            
            <!-- make sure to update trackTweetsAndSubscriptions in scripts.js if the Tweet button DOM path changes in the future -->
            <a class="button small transparent radius sp-twitter-share-button" target="_blank" href="https://twitter.com/share?text=Introduction+to+Thor&via=sitepointdotcom">
              <i class="icon-twitter"></i>
              Tweet
            </a>
            
            <!-- make sure to update trackTweetsAndSubscriptions in scripts.js if the Subscribe button DOM path changes in the future -->
            <a class="button small transparent radius subscribe-button" target="_blank" href="https://confirmsubscription.com/h/y/1FD5B523FA48AA2B">
              <!--<i class="icon-envelope-alt"></i>-->
              Subscribe
            </a>
            
          </div>

        </header>

        <section class="article_body">

            <p><img src="./Introduction to Thor_files/256px-Ruby_logo.svg_-300x300.png" alt="256px-Ruby_logo.svg" width="300" height="300" class="alignleft size-medium wp-image-73120"></p>
<p>Looking at <a href="http://rubygems.org/stats">RubyGem’s list of “Most Downloaded” gems</a>, we notice lots of familiar names: “rake”, “rails”, “rack”, “actionmailer”, etc. But, “thor” is an exception; few of us have heard of it and even fewer have written code with it. So, what exactly is Thor?</p>
<p>It is a way to write powerful command line utilities in Ruby. It makes argument parsing really easy and specifies a certain format for command line arguments. <em>Tons</em> of Ruby projects use Thor to make writing command line utilities (for example, the “rails” command) easy, quick, and fun.</p>
<p>But, in order to understand why Thor is so awesome, we have to first understand what kind of problem it solves.</p>
<h2>The Olden Days</h2>
<p>Back when dynamic languages were meant to be for those who didn’t understand pointers, we had a procedure called <a href="http://linux.die.net/man/3/getopt_long">getopt_long</a> to parse command line options. The code required to actually use this function was generally a large <code>switch</code> statement which, once written, was to be forgotten. Until, of course, the day came when another option had to be added. Check out an example:</p>
<div><div id="highlighter_685209" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">while</code> <code class="cpp plain">(1)</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">static</code> <code class="cpp keyword bold">struct</code> <code class="cpp plain">option long_options[] =</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">/* These options set a flag. */</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code><code class="cpp string">"verbose"</code><code class="cpp plain">, no_argument,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;verbose_flag, 1},</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code><code class="cpp string">"brief"</code><code class="cpp plain">,&nbsp;&nbsp; no_argument,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;verbose_flag, 0},</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">/* These options don't set a flag.</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">We distinguish them by their indices. */</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code><code class="cpp string">"add"</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp; no_argument,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0, </code><code class="cpp string">'a'</code><code class="cpp plain">},</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code><code class="cpp string">"append"</code><code class="cpp plain">,&nbsp; no_argument,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0, </code><code class="cpp string">'b'</code><code class="cpp plain">},</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code><code class="cpp string">"delete"</code><code class="cpp plain">,&nbsp; required_argument, 0, </code><code class="cpp string">'d'</code><code class="cpp plain">},</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code><code class="cpp string">"create"</code><code class="cpp plain">,&nbsp; required_argument, 0, </code><code class="cpp string">'c'</code><code class="cpp plain">},</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code><code class="cpp string">"file"</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp; required_argument, 0, </code><code class="cpp string">'f'</code><code class="cpp plain">},</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{0, 0, 0, 0}</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">};</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">/* getopt_long stores the option index here. */</code></div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">option_index = 0;</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">c = getopt_long (argc, argv, </code><code class="cpp string">"abc:d:f:"</code><code class="cpp plain">,</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">long_options, &amp;option_index);</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">/* Detect the end of the options. */</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(c == -1)</code></div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">switch</code> <code class="cpp plain">(c)</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">0:</code></div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">/* If this option set a flag, do nothing else now. */</code></div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(long_options[option_index].flag != 0)</code></div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">printf</code> <code class="cpp plain">(</code><code class="cpp string">"option %s"</code><code class="cpp plain">, long_options[option_index].name);</code></div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(optarg)</code></div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">printf</code> <code class="cpp plain">(</code><code class="cpp string">" with arg %s"</code><code class="cpp plain">, optarg);</code></div><div class="line number36 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">printf</code> <code class="cpp plain">(</code><code class="cpp string">"\n"</code><code class="cpp plain">);</code></div><div class="line number37 index36 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number38 index37 alt1">&nbsp;</div><div class="line number39 index38 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp string">'a'</code><code class="cpp plain">:</code></div><div class="line number40 index39 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">puts</code> <code class="cpp plain">(</code><code class="cpp string">"option -a\n"</code><code class="cpp plain">);</code></div><div class="line number41 index40 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number42 index41 alt1">&nbsp;</div><div class="line number43 index42 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp string">'b'</code><code class="cpp plain">:</code></div><div class="line number44 index43 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">puts</code> <code class="cpp plain">(</code><code class="cpp string">"option -b\n"</code><code class="cpp plain">);</code></div><div class="line number45 index44 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number46 index45 alt1">&nbsp;</div><div class="line number47 index46 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp string">'c'</code><code class="cpp plain">:</code></div><div class="line number48 index47 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">printf</code> <code class="cpp plain">(</code><code class="cpp string">"option -c with value `%s'\n"</code><code class="cpp plain">, optarg);</code></div><div class="line number49 index48 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number50 index49 alt1">&nbsp;</div><div class="line number51 index50 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp string">'d'</code><code class="cpp plain">:</code></div><div class="line number52 index51 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">printf</code> <code class="cpp plain">(</code><code class="cpp string">"option -d with value `%s'\n"</code><code class="cpp plain">, optarg);</code></div><div class="line number53 index52 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number54 index53 alt1">&nbsp;</div><div class="line number55 index54 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp string">'f'</code><code class="cpp plain">:</code></div><div class="line number56 index55 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">printf</code> <code class="cpp plain">(</code><code class="cpp string">"option -f with value `%s'\n"</code><code class="cpp plain">, optarg);</code></div><div class="line number57 index56 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number58 index57 alt1">&nbsp;</div><div class="line number59 index58 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp string">'?'</code><code class="cpp plain">:</code></div><div class="line number60 index59 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">/* getopt_long already printed an error message. */</code></div><div class="line number61 index60 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number62 index61 alt1">&nbsp;</div><div class="line number63 index62 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">default</code><code class="cpp plain">:</code></div><div class="line number64 index63 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">abort</code> <code class="cpp plain">();</code></div><div class="line number65 index64 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number66 index65 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Even if you’ve never looked at C code in your life, it doesn’t look like a pleasant experience. So, they came up with libraries to make this operation a little bit simpler. In the Perl community, “coming of age” includes writing your own command-opts parser. As it turns out, Perl’s heavy usage in command line utilities grew from its enviable GetOpts::Long module. Check out this example from Perldoc (Perl’s documentation system):</p>
<div><div id="highlighter_781631" class="syntaxhighlighter  perl"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="perl keyword">use</code> <code class="perl plain">Getopt::Long;</code></div><div class="line number2 index1 alt1"><code class="perl keyword">my</code> <code class="perl variable">$data</code> <code class="perl plain">= </code><code class="perl string">"file.dat"</code><code class="perl plain">;</code></div><div class="line number3 index2 alt2"><code class="perl keyword">my</code> <code class="perl variable">$length</code> <code class="perl plain">= 24;</code></div><div class="line number4 index3 alt1"><code class="perl keyword">my</code> <code class="perl variable">$verbose</code><code class="perl plain">;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="perl plain">GetOptions(</code><code class="perl string">"length=i"</code> <code class="perl plain">=&gt; \</code><code class="perl variable">$length</code><code class="perl plain">, </code></div><div class="line number7 index6 alt2"><code class="perl spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="perl string">"file=s"</code> <code class="perl plain">=&gt; \</code><code class="perl variable">$data</code><code class="perl plain">,</code></div><div class="line number8 index7 alt1"><code class="perl spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="perl string">"verbose"</code> <code class="perl plain">=&gt; \</code><code class="perl variable">$verbose</code><code class="perl plain">) or </code><code class="perl keyword">die</code><code class="perl plain">(</code><code class="perl string">"Error in command line arguments"</code><code class="perl plain">);</code></div></div></td></tr></tbody></table></div></div>
<p>Basically, this code allows you to specify length, data, and verbose options, along with numerical, string and boolean values, respectively. But, this still doesn’t seem right. It doesn’t feel very clean or object oriented because we’re just stuffing things into variables. </p>
<p>Thor is the “Ruby way” of doing command line option parsing. It makes everything wonderfully object-oriented and abstracts the details away. This allows you to concentrate on your grand idea instead of messing around with options and string parsing unnecessarily. </p>
<p>Let’s see a concrete example of how Thor works its magic.</p>
<h2>First Steps with Thor</h2>
<p>Let’s get straight to a simple example:</p>
<div><div id="highlighter_664069" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">require </code><code class="ruby string">'thor'</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">SayHi &lt; Thor</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">desc </code><code class="ruby string">"hi NAME"</code><code class="ruby plain">, </code><code class="ruby string">"say hello to NAME"</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">hi(name)</code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">puts </code><code class="ruby string">"Hi #{name}!"</code></div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number9 index8 alt2"><code class="ruby keyword">end</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="ruby plain">SayHi.start(</code><code class="ruby constants">ARGV</code><code class="ruby plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>If you run this without any arguments, you should get something like this as output:</p>
<div><div id="highlighter_632003" class="syntaxhighlighter  bash"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="bash plain">Commands:</code></div><div class="line number2 index1 alt1"><code class="bash spaces">&nbsp;&nbsp;</code><code class="bash plain">first_steps.rb help [COMMAND]&nbsp; </code><code class="bash comments"># Describe available commands or one specific command</code></div><div class="line number3 index2 alt2"><code class="bash spaces">&nbsp;&nbsp;</code><code class="bash plain">first_steps.rb hi NAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="bash comments"># say hello to NAME</code></div></div></td></tr></tbody></table></div></div>
<p>With only a few lines of code, we have a full description of the command we’ve created! Of course, if you run the script with the arguments “hi Dhaivat”, you should get a response back saying “Hi Dhaivat!”. Let’s break down the code.</p>
<p>We created a class called “SayHi” that derives from the Thor class. Then, the next line talks about describing a specific command. The first argument to the “desc” function is “hi NAME”, which describes what kind of a command we want. In this case, it says that we want the user to be able to type in “hi” and then their name, which will be passed in as a variable. Another example would be “location LATITUDE LONGITUDE”, where the user can have pass in “location 64.39 21.34″ and the location command will receive the latitude and longitude specified by those numbers. </p>
<p>What exactly do I mean by receive? Once we pass an argument, Thor figures out what kind of format it fits in and calls that method from our “SayHi” class. In this case, it calls the “hi” method with “name” as an argument.</p>
<p>Finally, we have our “hi” method which is just standard Ruby code.</p>
<p>Thor applications generally follow this sort of pattern; there are lots of features that can be used, but the general, underlying concepts remain the same.</p>
<p>Let’s write up a small utility, called file-op that has a command line option to output the contents of a file. Note: I’m not naming this utility “cat” because there are too many implementations of it in this world.</p>
<div><div id="highlighter_511488" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">require </code><code class="ruby string">'thor'</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">FileOp &lt; Thor</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">desc </code><code class="ruby string">'output FILE_NAME'</code><code class="ruby plain">, </code><code class="ruby string">'print out the contents of FILE_NAME'</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">output(file_name)</code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">puts </code><code class="ruby color1">File</code><code class="ruby plain">.read(file_name)</code></div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number9 index8 alt2"><code class="ruby keyword">end</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="ruby plain">FileOp.start(</code><code class="ruby constants">ARGV</code><code class="ruby plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>It is quite nearly the same concept as the “SayHi” example, but this time if you run it with “output FILENAME”, it will output the contents of a file (which is handled through the “output” method of the “FileOp” class).</p>
<h2>Digging a bit deeper</h2>
<p>One of Thor’s most awesome features is the automatic “help generation”. The “desc” method used earlier has a second argument which actually <em>describes</em> what each command is designed to do. So, with our file-op utility, if run:</p>
<div><div id="highlighter_351760" class="syntaxhighlighter  bash"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="bash plain">ruby </code><code class="bash functions">file</code><code class="bash plain">-</code><code class="bash functions">op</code><code class="bash plain">.rb help output</code></div></div></td></tr></tbody></table></div></div>
<p>Thor prints out a nice usage notice:</p>
<div><div id="highlighter_590059" class="syntaxhighlighter  bash"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="bash plain">Usage:</code></div><div class="line number2 index1 alt1"><code class="bash spaces">&nbsp;&nbsp;</code><code class="bash plain">file_op_v1.rb output FILE_NAME</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="bash plain">print out the contents of FILE_NAME</code></div></div></td></tr></tbody></table></div></div>
<p>Not only are we clearly documenting what each command does in our code, the user knows what each command does too! </p>
<p>Obviously, few significant commandline applications are going to be satisfied with such a basic options structure. Fortunately, Thor has our back there too. Wouldn’t it be nice if we could add a flag to our “output” command to output the file to stderr? I know, it wouldn’t really be all that nice, but let’s do it anyway:</p>
<div><div id="highlighter_216455" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">require </code><code class="ruby string">'thor'</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">FileOp &lt; Thor</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">desc </code><code class="ruby string">'output FILE_NAME'</code><code class="ruby plain">, </code><code class="ruby string">'print out the contents of FILE_NAME'</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">option </code><code class="ruby color2">:stderr</code><code class="ruby plain">, </code><code class="ruby color2">:type</code> <code class="ruby plain">=&gt; </code><code class="ruby color2">:boolean</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">output(file_name)</code></div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments">#options[:stderr] is either true or false depending</code></div><div class="line number9 index8 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments">#on whether or not --stderr was passed</code></div><div class="line number10 index9 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">contents = </code><code class="ruby color1">File</code><code class="ruby plain">.read(file_name)</code></div><div class="line number11 index10 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby plain">options[</code><code class="ruby color2">:stderr</code><code class="ruby plain">]</code></div><div class="line number12 index11 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby variable bold">$stderr</code><code class="ruby plain">.puts contents</code></div><div class="line number13 index12 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">else</code></div><div class="line number14 index13 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby variable bold">$stdout</code><code class="ruby plain">.puts contents </code></div><div class="line number15 index14 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number16 index15 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number17 index16 alt2"><code class="ruby keyword">end</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="ruby plain">FileOp.start(</code><code class="ruby constants">ARGV</code><code class="ruby plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>We’ve added a few lines, but the most important is the <code>option :stderr</code>. This line tells Thor that whatever command we just defined (i.e. “output” in this case) can have a flag passed in as a boolean. In other words, it is either passed in or not passed in; it doesn’t have another value attached to it like <code>--times 15</code> would. So, we can run:</p>
<div><div id="highlighter_280872" class="syntaxhighlighter  bash"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="bash plain">ruby </code><code class="bash functions">file</code><code class="bash plain">-ops-v2.rb output --stderr filename</code></div></div></td></tr></tbody></table></div></div>
<p>which would print the contents of “filename” to stderr.</p>
<p>But, this whole “option” thing makes Thor a bit odd. How does it know which command we’re adding the option to? Anytime you’re using <code>option</code>, it refers to the <code>desc</code> call just before it. Let’s add another command to our <code>file-op</code> utility that simply creates an empty file. This is equivalent to touch on *nix systems, so we’ll call the command “touch”:</p>
<div><div id="highlighter_371017" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">require </code><code class="ruby string">'thor'</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">FileOp &lt; Thor</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">desc </code><code class="ruby string">'output FILE_NAME'</code><code class="ruby plain">, </code><code class="ruby string">'print out the contents of FILE_NAME'</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">option </code><code class="ruby color2">:stderr</code><code class="ruby plain">, </code><code class="ruby color2">:type</code> <code class="ruby plain">=&gt; </code><code class="ruby color2">:boolean</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">output(file_name)</code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments">#options[:stderr] is either true or false depending</code></div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments">#on whether or not --stderr was passed</code></div><div class="line number9 index8 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">contents = </code><code class="ruby color1">File</code><code class="ruby plain">.read(file_name)</code></div><div class="line number10 index9 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby plain">options[</code><code class="ruby color2">:stderr</code><code class="ruby plain">]</code></div><div class="line number11 index10 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby variable bold">$stderr</code><code class="ruby plain">.puts contents</code></div><div class="line number12 index11 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">else</code></div><div class="line number13 index12 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby variable bold">$stdout</code><code class="ruby plain">.puts contents </code></div><div class="line number14 index13 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number15 index14 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">desc </code><code class="ruby string">'touch FILE_NAME'</code><code class="ruby plain">, </code><code class="ruby string">'creates an empty file named FILE_NAME'</code></div><div class="line number18 index17 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">option </code><code class="ruby color2">:chmod</code><code class="ruby plain">, </code><code class="ruby color2">:type</code> <code class="ruby plain">=&gt; </code><code class="ruby color2">:numeric</code></div><div class="line number19 index18 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">touch(file_name)</code></div><div class="line number20 index19 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">f = </code><code class="ruby color1">File</code><code class="ruby plain">.</code><code class="ruby keyword">new</code><code class="ruby plain">(file_name, </code><code class="ruby string">"w"</code><code class="ruby plain">)</code></div><div class="line number21 index20 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">f.chmod(options[</code><code class="ruby color2">:chmod</code><code class="ruby plain">]) </code><code class="ruby keyword">if</code> <code class="ruby plain">options[</code><code class="ruby color2">:chmod</code><code class="ruby plain">]</code></div><div class="line number22 index21 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number23 index22 alt2"><code class="ruby keyword">end</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="ruby plain">FileOp.start(</code><code class="ruby constants">ARGV</code><code class="ruby plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>The implementation is quite simple. All I’ve done is finished up with the <code>output</code> code and <em>then</em> placed the <code>desc</code> call for “touch”. </p>
<p>As an added bonus, I even included a <code>--chmod</code> option which allows you to set the permissions of the files you “touch” (e.g. passing in a 000 essentially creates a locked file). As a matter of personal preference, I don’t like the way Thor maintains the link between <code>option</code> and the method it affects, although I’m not sure of an alternative solution that would be as nice to use.</p>
<h2>Class Options</h2>
<p>What about commands that can be applied to any command? Something like:</p>
<div><div id="highlighter_401467" class="syntaxhighlighter  bash"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="bash plain">some_utility.rb -</code><code class="bash functions">v</code></div></div></td></tr></tbody></table></div></div>
<p>Thor has us covered. These options, which are not associated with a specific command, are called <em>class options</em>. We could do with some more information when our utility runs. But, we usually don’t want this information, so we’ll include a verbosity option:</p>
<div><div id="highlighter_959013" class="syntaxhighlighter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">require </code><code class="ruby string">'thor'</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">FileOp &lt; Thor</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">class_option </code><code class="ruby color2">:verbose</code><code class="ruby plain">, </code><code class="ruby color2">:type</code> <code class="ruby plain">=&gt; </code><code class="ruby color2">:boolean</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">desc </code><code class="ruby string">'output FILE_NAME'</code><code class="ruby plain">, </code><code class="ruby string">'print out the contents of FILE_NAME'</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">option </code><code class="ruby color2">:stderr</code><code class="ruby plain">, </code><code class="ruby color2">:type</code> <code class="ruby plain">=&gt; </code><code class="ruby color2">:boolean</code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">output(file_name)</code></div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">log(</code><code class="ruby string">"Starting to read file..."</code><code class="ruby plain">)</code></div><div class="line number9 index8 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments">#options[:stderr] is either true or false depending</code></div><div class="line number10 index9 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby comments">#on whether or not --stderr was passed</code></div><div class="line number11 index10 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">contents = </code><code class="ruby color1">File</code><code class="ruby plain">.read(file_name)</code></div><div class="line number12 index11 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">log(</code><code class="ruby string">"File contents:"</code><code class="ruby plain">)</code></div><div class="line number13 index12 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby plain">options[</code><code class="ruby color2">:stderr</code><code class="ruby plain">]</code></div><div class="line number14 index13 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">log(</code><code class="ruby string">"(in stderr)"</code><code class="ruby plain">)</code></div><div class="line number15 index14 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby variable bold">$stderr</code><code class="ruby plain">.puts contents</code></div><div class="line number16 index15 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">else</code></div><div class="line number17 index16 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">log(</code><code class="ruby string">"(in stdout)"</code><code class="ruby plain">)</code></div><div class="line number18 index17 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby variable bold">$stdout</code><code class="ruby plain">.puts contents </code></div><div class="line number19 index18 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number20 index19 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">no_commands </code><code class="ruby keyword">do</code></div><div class="line number23 index22 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">log(str)</code></div><div class="line number24 index23 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">puts str </code><code class="ruby keyword">if</code> <code class="ruby plain">options[</code><code class="ruby color2">:verbose</code><code class="ruby plain">]</code></div><div class="line number25 index24 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number26 index25 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">desc </code><code class="ruby string">'touch FILE_NAME'</code><code class="ruby plain">, </code><code class="ruby string">'creates an empty file named FILE_NAME'</code></div><div class="line number29 index28 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">option </code><code class="ruby color2">:chmod</code><code class="ruby plain">, </code><code class="ruby color2">:type</code> <code class="ruby plain">=&gt; </code><code class="ruby color2">:numeric</code></div><div class="line number30 index29 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">touch(file_name)</code></div><div class="line number31 index30 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">log(</code><code class="ruby string">"Touching file..."</code><code class="ruby plain">)</code></div><div class="line number32 index31 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">f = </code><code class="ruby color1">File</code><code class="ruby plain">.</code><code class="ruby keyword">new</code><code class="ruby plain">(file_name, </code><code class="ruby string">"w"</code><code class="ruby plain">)</code></div><div class="line number33 index32 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">f.chmod(options[</code><code class="ruby color2">:chmod</code><code class="ruby plain">]) </code><code class="ruby keyword">if</code> <code class="ruby plain">options[</code><code class="ruby color2">:chmod</code><code class="ruby plain">]</code></div><div class="line number34 index33 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number35 index34 alt2"><code class="ruby keyword">end</code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="ruby plain">FileOp.start(</code><code class="ruby constants">ARGV</code><code class="ruby plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>If you run this:</p>
<div><div id="highlighter_912233" class="syntaxhighlighter  bash"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="bash plain">ruby file_op_v5.rb output some_file --verbose</code></div></div></td></tr></tbody></table></div></div>
<p>You should see some log messages in addition to the file contents. Let’s take a look at the code. </p>
<p>We’ve added the <code>log</code> method, however, it is contained in a <code>nocommands</code> block. In order to tell Thor that <code>log</code> is not associated with a command we have to put it within this block. Within the <code>log</code> method, we print out the given string if Thor receives <code>--verbose</code>. We then use this method within the output and touch commands. </p>
<h2>Wrapping It Up</h2>
<p>Thor is an incredibly versatile library and makes command line parsing easy and intuitive. However, there are a few hiccups such as the <code>nocommands</code> block that one should be aware of to avoid potential gotchas. </p>
<p>I’ve used Thor in many different places, many times for short utilities to move some files around or search through some data. I have found it a very useful tool and hopefully you will, too.</p>
<p>The source for this article can be found <a href="https://github.com/RubySource/thor_examples" target="_blank">here.</a></p>

        </section>

        <div class="article__author-bios">
          
    <div class="contributor contributor--large">

          <figure class="contributor_avatar">
      <a href="http://www.sitepoint.com/author/dpandya/">
        <img src="./Introduction to Thor_files/1404782885217352-96x96.png" width="96" height="96" alt="Dhaivat Pandya" class="avatar avatar-96 wp-user-avatar wp-user-avatar-96 alignnone photo">      </a>
    </figure>
  
      <div class="contributor_details">

          <div class="contributor_name">
    <a href="http://www.sitepoint.com/author/dpandya/">Dhaivat Pandya</a>
  </div>

  
        <p class="contributor_longdesc">I'm a developer, math enthusiast and student.</p>

        <ul class="contributor_social">
          <li><a href="https://twitter.com/dhaivatpoincare" target="_blank"><i class="icon-twitter"></i></a></li>        </ul>
      </div>
    </div>

          </div>

                  <div class="related-content">
            <h2>You might also like:</h2>
            <ul class="article-list article-list--related">
              <li class="article-list_item  tile post-tile">
  <article class="article article--micro article--micro--related category-ruby " data-disqus-id="http://www.sitepoint.com/unraveling-string-key-performance-ruby-2-2/">
    <header class="article_category"><h2 class="article_category_title"><a href="http://www.sitepoint.com/ruby/">Ruby</a><a class="comment-info" href="http://www.sitepoint.com/unraveling-string-key-performance-ruby-2-2/#comments"><span class="comment-info__count">4</span><span class="comment-info__icon icon-comment"></span></a></h2></header>
    
    <section class="article_header">
      <h1 class="article_title"><a href="http://www.sitepoint.com/unraveling-string-key-performance-ruby-2-2/">Unraveling String Key Performance in Ruby 2.2</a></h1>
      <div class="contributor article_contributor">
        <p class="contributor_name article_author-name">by <a href="http://www.sitepoint.com/author/rschneeman/">Richard Schneeman</a></p>
      </div>
      
      <div class="article_meta-data"><p class="article_pub-date"><time datetime="2014-11-24 07:00:18" pubdate="">Nov 24, 2014</time></p></div>
      </section>
  </article>
</li>              <div class="widget maestro maestro-content-type-html " id="maestro-product-18"><li class="article-list_item  tile post-tile">
  <article class="article article--micro article--micro--related category-web">
    <header class="article_category"><h2 class="article_category_title"><a href="https://learnable.com/?utm_source=sitepoint&utm_medium=related-items&utm_content=getting-started-ruby">Learnable</a></h2></header>
    <section class="article_header">
      <h1 class="article_title"><a href="https://learnable.com/books/jump-start-rails/?utm_source=sitepoint&utm_medium=related-items&utm_content=getting-started-ruby">Book: Jump Start Rails</a></h1>
      <div class="contributor article_contributor">
        <p class="contributor_name article_author-name">by <a href="http://www.sitepoint.com/author/ahawthorne/">Andy Hawthorne</a></p>
      </div>
      <div class="article_meta-data"><p class="article_pub-date">PREMIUM</p></div>
    </section>
  </article>
</li></div>              <li class="article-list_item  tile post-tile">
  <article class="article article--micro article--micro--related category-ruby " data-disqus-id="http://www.sitepoint.com/mini-chat-rails-server-sent-events/">
    <header class="article_category"><h2 class="article_category_title"><a href="http://www.sitepoint.com/ruby/">Ruby</a><a class="comment-info" href="http://www.sitepoint.com/mini-chat-rails-server-sent-events/#comments"><span class="comment-info__count">16</span><span class="comment-info__icon icon-comment"></span></a></h2></header>
    
    <section class="article_header">
      <h1 class="article_title"><a href="http://www.sitepoint.com/mini-chat-rails-server-sent-events/">Mini-chat with Rails and Server-Sent Events</a></h1>
      <div class="contributor article_contributor">
        <p class="contributor_name article_author-name">by <a href="http://www.sitepoint.com/author/ibodrov/">Ilya Bodrov</a></p>
      </div>
      
      <div class="article_meta-data"><p class="article_pub-date"><time datetime="2014-11-20 07:00:44" pubdate="">Nov 20, 2014</time></p></div>
      </section>
  </article>
</li>          </ul>
        </div>
        
        <div class="promo-panel">
          <div class="widget maestro maestro-content-type-product " id="maestro-product-29"><div class="promo-panel_media-object"><img src="./Introduction to Thor_files/jshtml-basics1_medium_3d.png"></div>
<div class="promo-panel_content">
  <h1 class="promo-panel_title">
    Free book: Jump Start HTML5 Basics
  </h1>
  <p>Grab a free copy of one our latest ebooks! Packed with hints and tips on HTML5's most powerful new features.</p>
  <form class="promo-panel_action"><input type="email" name="email" class="promo-panel_email" placeholder="email address"><input type="hidden" name="content" value="29"><button class="button radius">Claim Book<div class="spinner" role="progressbar" style="position: relative; width: 0px; z-index: 2000000000;"><div style="position: absolute; top: -1px; opacity: 0.25; -webkit-animation: opacity-72-25-0-13 1.42857142857143s linear infinite;"><div style="position: absolute; width: 5px; height: 2px; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 0px 1px; transform-origin: left 50% 0px; transform: rotate(0deg) translate(7px, 0px); border-radius: 1px; background: rgb(0, 0, 0);"></div></div><div style="position: absolute; top: -1px; opacity: 0.25; -webkit-animation: opacity-72-25-1-13 1.42857142857143s linear infinite;"><div style="position: absolute; width: 5px; height: 2px; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 0px 1px; transform-origin: left 50% 0px; transform: rotate(27deg) translate(7px, 0px); border-radius: 1px; background: rgb(0, 0, 0);"></div></div><div style="position: absolute; top: -1px; opacity: 0.25; -webkit-animation: opacity-72-25-2-13 1.42857142857143s linear infinite;"><div style="position: absolute; width: 5px; height: 2px; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 0px 1px; transform-origin: left 50% 0px; transform: rotate(55deg) translate(7px, 0px); border-radius: 1px; background: rgb(0, 0, 0);"></div></div><div style="position: absolute; top: -1px; opacity: 0.25; -webkit-animation: opacity-72-25-3-13 1.42857142857143s linear infinite;"><div style="position: absolute; width: 5px; height: 2px; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 0px 1px; transform-origin: left 50% 0px; transform: rotate(83deg) translate(7px, 0px); border-radius: 1px; background: rgb(0, 0, 0);"></div></div><div style="position: absolute; top: -1px; opacity: 0.25; -webkit-animation: opacity-72-25-4-13 1.42857142857143s linear infinite;"><div style="position: absolute; width: 5px; height: 2px; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 0px 1px; transform-origin: left 50% 0px; transform: rotate(110deg) translate(7px, 0px); border-radius: 1px; background: rgb(0, 0, 0);"></div></div><div style="position: absolute; top: -1px; opacity: 0.25; -webkit-animation: opacity-72-25-5-13 1.42857142857143s linear infinite;"><div style="position: absolute; width: 5px; height: 2px; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 0px 1px; transform-origin: left 50% 0px; transform: rotate(138deg) translate(7px, 0px); border-radius: 1px; background: rgb(0, 0, 0);"></div></div><div style="position: absolute; top: -1px; opacity: 0.25; -webkit-animation: opacity-72-25-6-13 1.42857142857143s linear infinite;"><div style="position: absolute; width: 5px; height: 2px; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 0px 1px; transform-origin: left 50% 0px; transform: rotate(166deg) translate(7px, 0px); border-radius: 1px; background: rgb(0, 0, 0);"></div></div><div style="position: absolute; top: -1px; opacity: 0.25; -webkit-animation: opacity-72-25-7-13 1.42857142857143s linear infinite;"><div style="position: absolute; width: 5px; height: 2px; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 0px 1px; transform-origin: left 50% 0px; transform: rotate(193deg) translate(7px, 0px); border-radius: 1px; background: rgb(0, 0, 0);"></div></div><div style="position: absolute; top: -1px; opacity: 0.25; -webkit-animation: opacity-72-25-8-13 1.42857142857143s linear infinite;"><div style="position: absolute; width: 5px; height: 2px; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 0px 1px; transform-origin: left 50% 0px; transform: rotate(221deg) translate(7px, 0px); border-radius: 1px; background: rgb(0, 0, 0);"></div></div><div style="position: absolute; top: -1px; opacity: 0.25; -webkit-animation: opacity-72-25-9-13 1.42857142857143s linear infinite;"><div style="position: absolute; width: 5px; height: 2px; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 0px 1px; transform-origin: left 50% 0px; transform: rotate(249deg) translate(7px, 0px); border-radius: 1px; background: rgb(0, 0, 0);"></div></div><div style="position: absolute; top: -1px; opacity: 0.25; -webkit-animation: opacity-72-25-10-13 1.42857142857143s linear infinite;"><div style="position: absolute; width: 5px; height: 2px; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 0px 1px; transform-origin: left 50% 0px; transform: rotate(276deg) translate(7px, 0px); border-radius: 1px; background: rgb(0, 0, 0);"></div></div><div style="position: absolute; top: -1px; opacity: 0.25; -webkit-animation: opacity-72-25-11-13 1.42857142857143s linear infinite;"><div style="position: absolute; width: 5px; height: 2px; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 0px 1px; transform-origin: left 50% 0px; transform: rotate(304deg) translate(7px, 0px); border-radius: 1px; background: rgb(0, 0, 0);"></div></div><div style="position: absolute; top: -1px; opacity: 0.25; -webkit-animation: opacity-72-25-12-13 1.42857142857143s linear infinite;"><div style="position: absolute; width: 5px; height: 2px; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 0px 1px; transform-origin: left 50% 0px; transform: rotate(332deg) translate(7px, 0px); border-radius: 1px; background: rgb(0, 0, 0);"></div></div></div></button></form>
</div></div>        </div>

                <div class="widget maestro maestro-content-type-ad hide-for-desktop-SP hide-for-tablet-SP" id="maestro-product-51"><!-- SP2013_Articles_320x50_2 -->
<div id="div-gpt-ad-1392428092543-6" style="width:320px; height:50px;" class="adspot">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1392428092543-6"); });</script>
 </div></div>
        <a id="comments"></a>
        
<div id="disqus_thread"><iframe id="dsq-2" data-disqus-uid="2" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./Introduction to Thor_files/saved_resource.html" style="width: 100% !important; border: none !important; overflow: hidden !important; height: 836px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe></div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://www.sitepoint.com/introduction-thor/';
    var disqus_identifier = '73119 http://www.sitepoint.com/?p=73119';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'sitepointproduction';
    var disqus_title = "Introduction to Thor";
        var disqus_config = function () {
        var config = this; // Access to the config object
        config.language = '';

        /*
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            var script = document.createElement('script');
            script.async = true;
            script.src = '?cf_action=sync_comments&post_id=73119';

            var firstScript = document.getElementsByTagName( "script" )[0];
            firstScript.parentNode.insertBefore(script, firstScript);
        });
                    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/www.sitepoint.com\/introduction-thor\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.' + 'disqus.com' + '/embed.js?pname=wordpress&pver=2.74';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

      </article>
    </div>
  
  <aside class="page_aside article_aside">
    <div class="adrow--top">
      <div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-product-1"><!-- SP2013_Articles_300x250_1 -->
<div id="div-gpt-ad-1392428092543-0" style="width:300px; height:250px;" class="adspot">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1392428092543-0"); });</script>
 </div></div>    </div>
    <div class="adrow--middle">
      <div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-product-172"><!-- Sitepoint_125x125 -->
<div id="div-gpt-ad-1400800012700-0" style="width:125px; height:125px;" class="adspot">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1400800012700-0"); });</script>
 </div></div><div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-product-166"><!-- Sitepoint_125x125_2 -->
<div id="div-gpt-ad-1400782268851-0" style="width:125px; height:125px;" class="adspot">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1400782268851-0"); });</script>
 </div></div><div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-product-167"><!-- Sitepoint_125x125_3 -->
<div id="div-gpt-ad-1400782991292-0" style="width:125px; height:125px;" class="adspot">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1400782991292-0"); });</script>
 </div></div><div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-product-168"><!-- Sitepoint_125x125_4 -->
<div id="div-gpt-ad-1400783440189-0" style="width:125px; height:125px;" class="adspot">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1400783440189-0"); });</script>
 </div></div><div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-product-169"><!-- Sitepoint_125x125_5 -->
<div id="div-gpt-ad-1400783664460-0" style="width:125px; height:125px;" class="adspot">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1400783664460-0"); });</script>
 </div></div><div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-product-170"><!-- Sitepoint_125x125_6 -->
<div id="div-gpt-ad-1400783847643-0" style="width:125px; height:125px;" class="adspot">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1400783847643-0"); });</script>
 </div></div>    </div>
    <div class="adrow--bottom">
      <div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-product-48"><!-- SP2013_Articles_300x250_4 -->
<div id="div-gpt-ad-1392428092543-3" style="width:300px; height:250px;" class="adspot">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1392428092543-3"); });</script>
 </div></div><div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-product-49"><!-- SP2013_Articles_300x600_1 -->
<div id="div-gpt-ad-1392428092543-4" style="width:300px; height:600px;" class="adspot">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1392428092543-4"); });</script>
 </div></div>    </div>
  </aside>

</main>

    <footer class="site-footer" role="contentinfo">
      <div class="row">

        <ul class="footer-links">
          <li class="foot-link_item">
            <h3>About</h3>
          </li>
          <li class="foot-link_item">
            <a href="http://www.sitepoint.com/about-us/">About us</a>
          </li>
          <li class="foot-link_item">
            <a href="http://www.sitepoint.com/advertising">Advertise</a>
          </li>
          <li class="foot-link_item">
            <a href="http://www.sitepoint.com/press">Press Room</a>
          </li>
          <li class="foot-link_item">
            <a href="http://www.sitepoint.com/legals">Legals</a>
          </li>
          <li class="foot-link_item">
            <a href="mailto:feedback@sitepoint.com">Feedback</a>
          </li>
          <li class="foot-link_item">
            <a href="http://www.sitepoint.com/write-for-us">Write for Us</a>
          </li>
        </ul>

        <ul class="footer-links">
          <li class="foot-link_item">
            <h3>Our Sites</h3>
          </li>
          <li class="foot-link_item">
            <a href="https://learnable.com/" target="_blank">Learnable</a>
          </li>
          <li class="foot-link_item">
            <a href="http://reference.sitepoint.com/" target="_blank">Reference</a>
          </li>
          <li class="foot-link_item">
            <a href="http://www.sitepoint.com/hosting-reviews/" target="_blank">Hosting Reviews</a>
          </li>
          <li class="foot-link_item">
            <a href="http://www.sitepoint.com/web-foundations/">Web Foundations</a>
          </li>
        </ul>

        <ul class="footer-links">
          <li class="foot-link_item">
            <h3>Connect</h3>
          </li>
          <li class="foot-link_item foot-link_item--icons">
            <a href="http://www.sitepoint.com/feed"><i class="icon-rss icon-blocks icon-blocks--rss"></i></a>
            <a href="http://www.sitepoint.com/newsletter"><i class="icon-envelope-alt icon-blocks icon-blocks--newsletter"></i></a>
            <a href="https://www.facebook.com/sitepoint" target="_blank"><i class="icon-facebook icon-blocks icon-blocks--facebook"></i></a>
            <a href="http://twitter.com/sitepointdotcom" target="_blank"><i class="icon-twitter icon-blocks icon-blocks--twitter"></i></a>
            <a href="https://plus.google.com/+sitepoint" target="_blank"><i class="icon-google-plus icon-blocks icon-blocks--google-plus"></i></a>
          </li>
        </ul>

        <p class="site-footer_copyright">
          © 2000 – 2014 SitePoint Pty. Ltd.
        </p>

      </div>
    </footer>

    <div id="search-dropdown" style="top: 60px; left: auto; right: 20px;">
      <div data-role="search-for">
        <a class="search-link" href="http://www.sitepoint.com/introduction-thor/#">Search for...</a>
      </div>
      <ul data-role="results"></ul>
    </div>

    				<script type="text/javascript"><!--
			var seriesdropdown = document.getElementById("orgseries_dropdown");
			if (seriesdropdown) { 
			 function onSeriesChange() {
					if ( seriesdropdown.options[seriesdropdown.selectedIndex].value != ( 0 || -1 ) ) {
						location.href = "http://www.sitepoint.com/series/"+seriesdropdown.options[seriesdropdown.selectedIndex].value;
					}
				}
				seriesdropdown.onchange = onSeriesChange;
			}
			--></script>
			
<!--Plugin WP Missed Schedule 2013.1231.2013 Active - Tag 6707293c0218e2d8b7aa38d418ffa608-->

<!-- This site is patched which an important unfixed problem since WordPress 2.5+ to 3.9+ -->



<!-- START Parse.ly Include: Standard -->
<div id="parsely-root" style="display: none">
  <div id="parsely-cfg" data-parsely-site="sitepoint.com"></div>
<script id="parsely-script" async="" src="http://static.parsely.com/p.js"></script></div>
<script>
(function(s, p, d) {
  var h=d.location.protocol, i=p+"-"+s,
      e=d.getElementById(i), r=d.getElementById(p+"-root"),
      u=h==="https:"?"d1z2jf7jlzjs58.cloudfront.net"
      :"static."+p+".com";
  if (e) return;
  e = d.createElement(s); e.id = i; e.async = true;
  e.src = h+"//"+u+"/p.js"; r.appendChild(e);
})("script", "parsely", document);
</script>
<!-- END Parse.ly Include: Standard -->

<script type="text/javascript" src="./Introduction to Thor_files/shCore.js"></script>
<script type="text/javascript" src="./Introduction to Thor_files/shBrushCpp.js"></script>
<script type="text/javascript" src="./Introduction to Thor_files/shBrushPerl.js"></script>
<script type="text/javascript" src="./Introduction to Thor_files/shBrushRuby.js"></script>
<script type="text/javascript" src="./Introduction to Thor_files/shBrushBash.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://www.sitepoint.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83c";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://www.sitepoint.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83c";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.defaults['wrap-lines'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="./Introduction to Thor_files/scripts-foot-1fff1067b547366e2ddc5d3cb9d0cb1f.js"></script>
<script>
                    $(document).ready(function() {
                      $(".article_header__buttons .sp-twitter-share-button").on("click", function (evt) {
                        evt.preventDefault();

                        var url = "https://twitter.com/intent/tweet?" + $.param({
                          url: "http://www.sitepoint.com/introduction-thor/",
                          text: "Introduction to Thor",
                          via: "sitepointdotcom"
                        });

                        var popupWidth = 550,
                            popupHeight = 420,
                            screenWidth = screen.width,
                            screenHeight = screen.height,
                            popupLeftOffset = Math.round(screenWidth / 2 - popupWidth / 2),
                            popupTopOffset = 0;
                        if (screenHeight > popupHeight) {
                          popupTopOffset = Math.round(screenHeight / 2 - popupHeight / 2);
                        }
                        window.open(url, null, "scrollbars=yes,resizable=yes,toolbar=no,location=yes" + ", width=" + popupWidth + ", height=" + popupHeight + ", left=" + popupLeftOffset + ",top=" + popupTopOffset);
                      });
                    });
                  </script><script>
                    $(document).ready(function() {
                      $(".article_header__buttons .subscribe-button").on("click", function (evt) {
                        evt.preventDefault();

                        var url = evt.target.href;

                        var popupWidth = 550,
                            popupHeight = 720,
                            screenWidth = screen.width,
                            screenHeight = screen.height,
                            popupLeftOffset = Math.round(screenWidth / 2 - popupWidth / 2),
                            popupTopOffset = 0;
                        if (screenHeight > popupHeight) {
                          popupTopOffset = Math.round(screenHeight / 2 - popupHeight / 2);
                        }
                        window.open(url, null, "scrollbars=yes,resizable=yes,toolbar=no,location=yes" + ", width=" + popupWidth + ", height=" + popupHeight + ", left=" + popupLeftOffset + ",top=" + popupTopOffset);
                      });
                    });
                  </script><script>(function($){$(document).ready(function(){ if(typeof DISQUSWIDGETS != "undefined"){DISQUSWIDGETS.loadCount($, "sitepointproduction")} });})(jQuery);</script>
  


<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Page Caching using memcached
Object Caching 941/974 objects using memcached
Content Delivery Network via Amazon Web Services: CloudFront: dab1nmslvvntp.cloudfront.net

 Served from: www.sitepoint.com @ 2014-11-30 05:46:58 by W3 Total Cache --><span id="buffer-extension-hover-button" style="display: none;position: absolute;z-index: 8675309;width: 100px;height: 25px;background-image: url(chrome-extension://noojglkidnpfjbincgijbaiedldjfbhh/data/shared/img/buffer-hover-icon@2x.png);background-size: 100px 25px;opacity: 0.9;cursor: pointer;"></span></body></html>